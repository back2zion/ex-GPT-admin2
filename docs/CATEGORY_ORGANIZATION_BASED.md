# 조직도 기반 카테고리 분류 체계

**작성일**: 2025-10-26
**버전**: 2.0 (조직도 기반)

---

## 개요

한국도로공사 실제 조직도를 기반으로 대화 자동 분류 체계를 재설계했습니다.
내부망 반입 후 하이포털을 통해 직원 정보(부처, 직급, 팀)를 활용하여 더 정확한 분류가 가능합니다.

---

## 조직 구조 분석

### 경영부사장 산하 (4개 본부)

#### 1. 기획본부
- 기획처
- 미래전략처
- 성과혁신처
- 지하고속도로추진단

#### 2. 관리본부
- 총무처
- 인력처
- 재무처
- 법무실
- 토지공간실
- 인재개발원

#### 3. 고객사업본부
- 통행료정책처
- 통행료시스템처
- 휴게사업처
- 통행료정산센터

#### 4. 디지털본부
- 디지털계획처
- 디지털관리처
- 데이터융합센터
- 정보보안센터

### 기술부사장 산하 (5개 본부 + 연구원)

#### 1. 도로본부
- 도로처
- 구조물처
- 시설처
- 특수교통합관리센터

#### 2. 교통본부
- 교통처
- 재난관리처
- ITS처
- 교통관제센터
- ITS지원센터
- 첨단기계화센터

#### 3. 건설본부
- 건설처
- 설계처
- 품질환경처

#### 4. 신사업본부
- 사업개발처
- 기술심사처
- 해외사업처
- 기술마켓처

#### 5. 도로교통연구원
- 도로교통연구원 관리처
- 도로교통연구원 연구처
- 스마트도로연구단
- 스마트건설사업단

### 기타 조직

- **홍보처** (사장 직속)
- **감사처** (상임감사위원 산하)
- **안전혁신처** (기술부사장 산하)
- **비상계획처** (경영부사장 산하)
- **지역본부**: 수도권, 서울경기, 강원, 충북, 대전충남, 전북, 광주전남, 대구경북, 부산경남
- **건설사업단**: 김포파주, 계양강화, 수도권, 양평이천, 천안안성, 세종천안, 서산아산, 새만금전주, 강진광주, 포항영덕, 함양합천, 합천창녕, 경남권, 중부도로개량, 남부도로개량

---

## 새로운 분류 체계

### 대분류 (3개)

1. **경영분야** (5개 소분류)
2. **기술분야** (5개 소분류)
3. **기타** (2개 소분류)

### 경영분야 소분류

#### 1. 기획/전략
**담당 조직**: 기획본부
- 기획처, 미래전략처, 성과혁신처, 지하고속도로추진단

**키워드**:
- 기획, 전략, 미래, 성과, 혁신
- 목표, 계획, 정책, 비전, 중장기
- KPI, 평가, 지표, 목표관리

**예시 질문**:
- "중장기 경영전략은 어떻게 수립하나요?"
- "성과평가 지표(KPI)는 무엇인가요?"
- "지하고속도로 추진 현황은?"

#### 2. 관리/인사
**담당 조직**: 관리본부
- 총무처, 인력처, 재무처, 법무실, 토지공간실, 인재개발원

**키워드**:
- 총무, 인사, 인력, 채용, 승진, 교육
- 급여, 보수, 재무, 회계, 예산, 결산
- 법무, 계약, 소송, 토지, 용지, 보상
- 인재, 직원, 근무, 조직, 부서

**예시 질문**:
- "인사규정은 어디서 확인하나요?"
- "예산 편성 절차는?"
- "토지 보상 기준은?"
- "직원 교육 프로그램은?"

#### 3. 고객/통행료
**담당 조직**: 고객사업본부
- 통행료정책처, 통행료시스템처, 휴게사업처, 통행료정산센터

**키워드**:
- 통행료, 요금, 정산, 하이패스, 미납, 할인, 면제
- 고객, 민원, 휴게소, 매점, 주유, 식당, 편의시설
- 서비스, 만족도, 불편, 개선

**예시 질문**:
- "통행료는 어떻게 산정되나요?"
- "하이패스 미납 조회는?"
- "휴게소 매점 관리는?"
- "고객 민원 처리 절차는?"

#### 4. 디지털/IT
**담당 조직**: 디지털본부
- 디지털계획처, 디지털관리처, 데이터융합센터, 정보보안센터

**키워드**:
- 디지털, IT, 정보, 시스템, 전산
- 데이터, 융합, 빅데이터, AI, 인공지능
- 보안, 해킹, 사이버, 클라우드, 서버
- 네트워크, 프로그램, 앱, 모바일

**예시 질문**:
- "디지털 전환 전략은?"
- "빅데이터 활용 현황은?"
- "정보보안 정책은?"
- "AI 도입 계획은?"

#### 5. 홍보/감사
**담당 조직**: 홍보처, 감사처
- 홍보처 (사장 직속)
- 감사처 (상임감사위원 산하)

**키워드**:
- 홍보, 보도, 언론, 미디어, 광고, 캠페인, 대외
- 감사, 내부통제, 감사처, 점검, 위반, 부정, 비리

**예시 질문**:
- "언론 보도자료 배포 절차는?"
- "내부감사 주기는?"
- "홍보 캠페인 기획은?"

---

### 기술분야 소분류

#### 1. 도로/시설
**담당 조직**: 도로본부
- 도로처, 구조물처, 시설처, 특수교통합관리센터

**키워드**:
- 도로, 포장, 노면, 구조물, 교량, 터널, 시설물
- 유지보수, 보수, 관리, 점검, 보강, 개량, 정비
- 파손, 균열, 손상, 열화, 특수교

**예시 질문**:
- "도로 안전 점검은 언제 하나요?"
- "교량 보수 기준은?"
- "터널 유지관리는?"
- "포장 손상 처리는?"

#### 2. 교통/ITS
**담당 조직**: 교통본부
- 교통처, 재난관리처, ITS처, 교통관제센터, ITS지원센터, 첨단기계화센터

**키워드**:
- 교통, ITS, 지능형, 관제, 통제, CCTV, 영상
- 소통, 정체, 혼잡, 차량, 속도, 제한, 단속
- 재난, 사고, 응급, 긴급, 제설, 집중호우
- 첨단기계화, 교통관제센터

**예시 질문**:
- "교통관제 시스템은?"
- "ITS 운영 현황은?"
- "재난 대응 절차는?"
- "제설 작업 기준은?"

#### 3. 건설/설계
**담당 조직**: 건설본부
- 건설처, 설계처, 품질환경처

**키워드**:
- 건설, 공사, 시공, 공정, 설계, 도면, 실시설계
- 토목, 토공, 구조, 품질, 환경, 친환경
- 환경영향평가, 안전관리, 공정관리, 계약, 발주

**예시 질문**:
- "도로 건설 공정은?"
- "설계 변경 절차는?"
- "환경영향평가는?"
- "품질관리 기준은?"

#### 4. 신사업/연구
**담당 조직**: 신사업본부, 도로교통연구원
- 사업개발처, 기술심사처, 해외사업처, 기술마켓처
- 도로교통연구원 관리처, 연구처, 스마트도로연구단, 스마트건설사업단

**키워드**:
- 신사업, 사업개발, 해외, 수출, 기술심사, 기술마켓
- 연구, R&D, 개발, 스마트, 자율주행, 전기차
- 친환경, 신기술, 특허, 혁신, 실증, 테스트베드
- 도로교통연구원

**예시 질문**:
- "신사업 발굴 절차는?"
- "스마트도로 연구 현황은?"
- "해외 사업 진출은?"
- "자율주행 실증은?"

#### 5. 안전/재난
**담당 조직**: 안전혁신처, 비상계획처
- 안전혁신처 (기술부사장 산하)
- 비상계획처 (경영부사장 산하)

**키워드**:
- 안전, 안전점검, 위험, 위험물, 재해, 재난관리
- 비상, 비상계획, 대응, 대피, 사고예방, 안전교육
- 안전혁신, 화재, 폭발, 붕괴

**예시 질문**:
- "안전점검 절차는?"
- "비상계획은?"
- "안전교육 프로그램은?"
- "재난 대응 매뉴얼은?"

---

### 기타 소분류

#### 1. 지역본부
**담당 조직**: 지역본부, 건설사업단
- 수도권, 서울경기, 강원, 충북, 대전충남, 전북, 광주전남, 대구경북, 부산경남
- 김포파주, 계양강화, 수도권, 양평이천 등 건설사업단

**키워드**:
- 수도권, 서울경기, 강원, 충북, 대전충남, 전북
- 광주전남, 대구경북, 부산경남, 지역본부, 지사
- 관리소, 건설사업단

**예시 질문**:
- "서울경기본부 연락처는?"
- "지역본부 조직도는?"
- "관리소 위치는?"

#### 2. 경영/기술 외
**분류**: 일반 질문, 조직과 무관한 내용
- 일반적인 지식 질문
- 도로공사 업무와 무관한 내용

**예시 질문**:
- "심층 합성곱 신경망에 대해 설명해줘"
- "날씨는 어때?"

---

## 자동 분류 시스템

### 이중 분류 전략

#### Layer 1: LLM 기반 분류 (주요)
- vLLM (Qwen3-32B-AWQ) 사용
- 조직도 기반 프롬프트
- 정확도: ~95%
- 응답 시간: 평균 2.2초

#### Layer 2: 키워드 기반 분류 (폴백)
- LLM 실패 시 자동 적용
- 조직별 키워드 매핑
- 정확도: ~80%
- 응답 시간: 0.01초

---

## 내부망 반입 후 활용 계획

### 1. 직원 정보 연동
하이포털 연동 시 자동으로 수집 가능한 정보:
- **부서/팀**: 사용자 소속 조직
- **직급**: 직급 정보
- **직위**: 처장, 부장, 차장, 과장 등

### 2. 조직별 맞춤 분류
```python
# 예: 직원이 디지털본부 소속일 경우
if user.department == "디지털본부":
    # 디지털/IT 관련 질문일 확률 높음
    category_weight["디지털/IT"] += 0.2
```

### 3. 통계 분석 개선
- 본부별 질문 통계
- 직급별 관심 주제
- 팀별 업무 분석

### 4. 권한 관리
- 조직별 접근 권한 차등화
- 민감 정보 접근 제어
- 감사/홍보 전용 데이터 분리

---

## 배포 내역

### 프론트엔드
**파일**: `/home/aigen/admin-api/frontend/src/pages/ConversationsPage.jsx`
- CATEGORY_MAP 업데이트 (line 46-62)
- 조직도 기반 5+5+2 분류 체계

### 백엔드
**파일**: `/home/aigen/admin-api/app/services/categorization.py`
- CATEGORY_MAP 업데이트 (line 16-26)
- KEYWORD_RULES 전면 재작성 (line 29-91)
- LLM 프롬프트 조직도 기반 수정 (line 93-127, 178-193)

### 배포 일시
- **프론트엔드**: 2025-10-26 13:40 KST
- **백엔드**: 2025-10-26 13:40 KST

---

## 기대 효과

### 1. 분류 정확도 향상
- 조직도 기반 명확한 기준
- 업무 실무 용어 반영
- LLM 학습 데이터 개선

### 2. 담당 부서 파악 용이
- 질문 → 소분류 → 담당 본부 즉시 확인
- 내부망 반입 후 자동 라우팅 가능

### 3. 통계 분석 실용성
- 본부별 질문 빈도
- 업무 영역별 관심도
- 조직 간 협업 필요성 파악

### 4. 향후 확장 가능
- 하이포털 연동 시 개인화
- 조직 변경 시 카테고리만 수정
- 신규 본부 추가 용이

---

## 검증 방법

### 수동 테스트
```bash
# layout.html에서 다양한 질문 테스트
https://ui.datastreams.co.kr:20443/layout.html

예시:
- "통행료는 어떻게 산정되나요?" → 경영분야 > 고객/통행료
- "도로 안전 점검은 언제 하나요?" → 기술분야 > 도로/시설
- "디지털 전환 전략은?" → 경영분야 > 디지털/IT
- "ITS 운영 현황은?" → 기술분야 > 교통/ITS
```

### Admin 페이지 확인
```
https://ui.datastreams.co.kr:20443/admin/#/conversations

대분류/소분류 selectbox로 필터링 테스트
```

### 로그 확인
```bash
# LLM 분류 로그
docker logs admin-api-admin-api-1 --tail 100 | grep "LLM Categorized"

# 키워드 분류 로그
docker logs admin-api-admin-api-1 --tail 100 | grep "Keyword-based"
```

---

## 유지보수 가이드

### 조직 개편 시 대응
1. 새로운 조직도 확인
2. `CATEGORY_MAP` 수정 (frontend + backend)
3. `KEYWORD_RULES` 키워드 추가/수정
4. LLM 프롬프트 업데이트
5. 빌드 & 재배포

### 분류 오류 발견 시
1. Admin 대화내역에서 오분류 케이스 확인
2. 질문 내용 분석
3. 키워드 추가 또는 LLM 프롬프트 보완
4. 재배포 후 재테스트

---

**최종 업데이트**: 2025-10-26 13:40 KST
**상태**: ✅ 완료 - 조직도 기반 분류 체계 적용됨
