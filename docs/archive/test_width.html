<!DOCTYPE html>
<html>
<head>
    <title>Width Test</title>
    <style>
        body { margin: 0; padding: 20px; font-family: monospace; }
        .test-result { margin: 10px 0; padding: 10px; border: 1px solid #ccc; }
        .pass { background: #d4edda; border-color: #c3e6cb; }
        .fail { background: #f8d7da; border-color: #f5c6cb; }
    </style>
</head>
<body>
    <h1>Dashboard Width Test</h1>
    <div id="results"></div>

    <script>
        async function testDashboard() {
            const resultsDiv = document.getElementById('results');

            // Test 1: Check if page loads
            try {
                const response = await fetch('/admin/');
                const html = await response.text();
                addResult('페이지 로드', response.ok, `Status: ${response.status}`);
            } catch (error) {
                addResult('페이지 로드', false, error.message);
            }

            // Test 2: Check CSS file
            try {
                const cssFiles = await fetch('/admin/')
                    .then(r => r.text())
                    .then(html => {
                        const matches = html.match(/\/assets\/index-[^"]+\.css/g);
                        return matches || [];
                    });

                addResult('CSS 파일 확인', cssFiles.length > 0, `Found ${cssFiles.length} CSS files`);

                // Check for maxWidth in CSS
                if (cssFiles.length > 0) {
                    const cssContent = await fetch(cssFiles[0]).then(r => r.text());
                    const hasMaxWidth = cssContent.includes('max-width');
                    const maxWidthMatches = cssContent.match(/max-width[^;]*/g) || [];
                    addResult('CSS maxWidth 검사', true, `Found ${maxWidthMatches.length} max-width rules`);
                }
            } catch (error) {
                addResult('CSS 검사', false, error.message);
            }
        }

        function addResult(testName, passed, details) {
            const resultDiv = document.createElement('div');
            resultDiv.className = `test-result ${passed ? 'pass' : 'fail'}`;
            resultDiv.innerHTML = `
                <strong>${passed ? '✓' : '✗'} ${testName}</strong><br>
                ${details}
            `;
            document.getElementById('results').appendChild(resultDiv);
        }

        testDashboard();
    </script>
</body>
</html>
