# STT ìŒì„± ì „ì‚¬ ì‹œìŠ¤í…œ PRD

**ë²„ì „**: 1.0
**ì‘ì„±ì¼**: 2025-10-21
**ìš°ì„ ìˆœìœ„**: P1 (High)
**ë‹´ë‹¹**: AI Streams Admin Team

---

## 1. í”„ë¡œì íŠ¸ ê°œìš”

### 1.1 ëª©ì 
ì´ë¬´ì²˜ë¡œë¶€í„° ë°›ì€ 500ë§Œê±´ì˜ ìŒì„±íŒŒì¼ì„ ìë™ìœ¼ë¡œ ì „ì‚¬(Speech-to-Text)í•˜ê³ , ìš”ì•½/íšŒì˜ë¡ì„ ìƒì„±í•˜ì—¬ ê´€ë ¨ìì—ê²Œ ì´ë©”ì¼ë¡œ ì†¡ì¶œí•˜ëŠ” ë°°ì¹˜ ì²˜ë¦¬ ì‹œìŠ¤í…œ êµ¬ì¶•

### 1.2 ë°°ê²½
- **ë°ì´í„° ê·œëª¨**: 500ë§Œê±´ì˜ ìŒì„±íŒŒì¼
- **ìš”êµ¬ ê¸°ëŠ¥**: ì „ì‚¬, ìš”ì•½, íšŒì˜ë¡ ìƒì„±, ì´ë©”ì¼ ì†¡ì¶œ
- **ëª¨ë‹ˆí„°ë§ í•„ìš”ì„±**: ëŒ€ê·œëª¨ ë°°ì¹˜ ì²˜ë¦¬ ì§„í–‰ ìƒí™© ì‹¤ì‹œê°„ ì¶”ì 
- **ë³´ì•ˆ ìš”êµ¬ì‚¬í•­**: ë¯¼ê°í•œ íšŒì˜ ë‚´ìš© ì²˜ë¦¬, ì ‘ê·¼ ê¶Œí•œ ê´€ë¦¬

### 1.3 ì„±ê³µ ê¸°ì¤€
- âœ… 500ë§Œê±´ ì „ì‚¬ ì²˜ë¦¬ ì™„ë£Œìœ¨ 99.9% ì´ìƒ
- âœ… í‰ê·  ì²˜ë¦¬ ì‹œê°„: 1ë¶„ ì´ë‚´ (ìŒì„±íŒŒì¼ 1ê±´ë‹¹)
- âœ… ìš”ì•½ ì •í™•ë„: ì‚¬ìš©ì ë§Œì¡±ë„ 4.0/5.0 ì´ìƒ
- âœ… ì´ë©”ì¼ ì†¡ì¶œ ì‹¤íŒ¨ìœ¨ 0.1% ë¯¸ë§Œ
- âœ… ë³´ì•ˆ ì·¨ì•½ì  0ê±´

---

## 2. ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­

### 2.1 STT ë°°ì¹˜ ì‘ì—… ê´€ë¦¬ (Priority: P0)

#### 2.1.1 ë°°ì¹˜ ì‘ì—… ìƒì„±
**ëª©í‘œ**: ìŒì„±íŒŒì¼ ë°°ì¹˜ë¥¼ ë“±ë¡í•˜ê³  ì „ì‚¬ ì‘ì—…ì„ ì‹œì‘

**ê¸°ëŠ¥**:
- ë°°ì¹˜ ì‘ì—… ìƒì„± (ì´ë¦„, ì„¤ëª…, íŒŒì¼ ê²½ë¡œ)
- ìŒì„±íŒŒì¼ ëª©ë¡ ìë™ ìŠ¤ìº” (MinIO/S3/ë¡œì»¬ ë””ë ‰í† ë¦¬)
- íŒŒì¼ í˜•ì‹ ê²€ì¦ (mp3, wav, m4a, flac)
- ì˜ˆìƒ ì²˜ë¦¬ ì‹œê°„ ê³„ì‚°
- ë°°ì¹˜ ì‘ì—… ìƒíƒœ: `pending`, `processing`, `completed`, `failed`, `paused`

**ì…ë ¥**:
```json
{
  "name": "2024ë…„ 12ì›” ì´ë¬´ì²˜ íšŒì˜ë¡",
  "description": "ì´ë¬´ì²˜ ì •ê¸° íšŒì˜ ìŒì„±íŒŒì¼ 500ë§Œê±´",
  "source_path": "s3://audio-files/2024-12/",
  "file_pattern": "*.mp3",
  "priority": "high",
  "notify_emails": ["admin@ex.co.kr", "manager@ex.co.kr"]
}
```

**ì¶œë ¥**:
```json
{
  "batch_id": 12345,
  "status": "pending",
  "total_files": 5000000,
  "estimated_duration": "3 days 12 hours",
  "created_at": "2025-10-21T10:00:00Z"
}
```

**ë³´ì•ˆ ìš”êµ¬ì‚¬í•­**:
- âœ… íŒŒì¼ ê²½ë¡œ ê²€ì¦ (Path Traversal ë°©ì§€)
- âœ… íŒŒì¼ í¬ê¸° ì œí•œ (1GB ì´í•˜)
- âœ… í—ˆìš©ëœ íŒŒì¼ í˜•ì‹ë§Œ ì²˜ë¦¬
- âœ… ì´ë©”ì¼ ì£¼ì†Œ ê²€ì¦ (Email Injection ë°©ì§€)

---

#### 2.1.2 ë°°ì¹˜ ì§„í–‰ ìƒí™© ëª¨ë‹ˆí„°ë§
**ëª©í‘œ**: ì‹¤ì‹œê°„ìœ¼ë¡œ ì „ì‚¬ ì§„í–‰ë¥  ë° ìƒíƒœ í™•ì¸

**ê¸°ëŠ¥**:
- ì „ì²´ ì§„í–‰ë¥  (%) í‘œì‹œ
- ì²˜ë¦¬ ì™„ë£Œ / ì‹¤íŒ¨ / ëŒ€ê¸° ê±´ìˆ˜
- í‰ê·  ì²˜ë¦¬ ì†ë„ (ê±´/ë¶„)
- ì˜ˆìƒ ì™„ë£Œ ì‹œê°„
- ì‹¤ì‹œê°„ ë¡œê·¸ ìŠ¤íŠ¸ë¦¬ë°

**API ì—”ë“œí¬ì¸íŠ¸**:
```
GET /api/v1/admin/stt-batches/{batch_id}/progress
```

**ì‘ë‹µ ì˜ˆì‹œ**:
```json
{
  "batch_id": 12345,
  "status": "processing",
  "progress": {
    "total_files": 5000000,
    "completed": 3250000,
    "failed": 1250,
    "pending": 1748750,
    "progress_percentage": 65.0,
    "avg_speed": 1200,
    "estimated_completion": "2025-10-23T18:30:00Z"
  },
  "current_file": "meeting_2024_12_15_001.mp3",
  "last_error": null
}
```

**ì‹œíì–´ ì½”ë”©**:
- âœ… SQL Injection ë°©ì§€ (Parameterized Query)
- âœ… ê¶Œí•œ ê²€ì¦ (Cerbos: stt_batch:read)
- âœ… Rate Limiting (API ê³¼ë‹¤ í˜¸ì¶œ ë°©ì§€)

---

### 2.2 ìŒì„± ì „ì‚¬ ê²°ê³¼ ì €ì¥ (Priority: P0)

#### 2.2.1 ì „ì‚¬ í…ìŠ¤íŠ¸ ì €ì¥
**ëª©í‘œ**: STT ì²˜ë¦¬ ê²°ê³¼ë¥¼ ì•ˆì „í•˜ê²Œ ì €ì¥í•˜ê³  ê²€ìƒ‰ ê°€ëŠ¥í•˜ë„ë¡ ì¸ë±ì‹±

**ê¸°ëŠ¥**:
- ì „ì‚¬ í…ìŠ¤íŠ¸ ì €ì¥ (PostgreSQL)
- ì›ë³¸ ìŒì„±íŒŒì¼ ê²½ë¡œ ì €ì¥
- ì „ì‚¬ ì‹ ë¢°ë„(confidence) ê¸°ë¡
- í™”ì ë¶„ë¦¬(diarization) ê²°ê³¼ ì €ì¥
- íƒ€ì„ìŠ¤íƒ¬í”„ ì €ì¥ (00:00:15 "ì•ˆë…•í•˜ì„¸ìš”")

**ë°ì´í„° ëª¨ë¸**:
```python
class STTTranscription(Base):
    __tablename__ = "stt_transcriptions"

    id = Column(Integer, primary_key=True)
    batch_id = Column(Integer, ForeignKey("stt_batches.id"))
    audio_file_path = Column(String(500), nullable=False)
    audio_file_size = Column(BigInteger)  # bytes
    audio_duration = Column(Float)  # seconds

    # ì „ì‚¬ ê²°ê³¼
    transcription_text = Column(Text, nullable=False)
    transcription_confidence = Column(Float)  # 0.0 ~ 1.0
    language_code = Column(String(10), default="ko-KR")

    # í™”ì ë¶„ë¦¬
    speaker_labels = Column(JSONB)  # {"speaker_1": "í™ê¸¸ë™", ...}
    segments = Column(JSONB)  # [{"start": 0.0, "end": 5.2, "speaker": "speaker_1", "text": "..."}]

    # ë©”íƒ€ë°ì´í„°
    processing_duration = Column(Float)  # seconds
    stt_engine = Column(String(50))  # "whisper-large-v3", "google-stt"
    status = Column(String(20))  # "success", "failed", "partial"
    error_message = Column(Text)

    created_at = Column(DateTime, default=datetime.utcnow)
    updated_at = Column(DateTime, onupdate=datetime.utcnow)
```

**ì €ì¥ ìœ„ì¹˜ ì •ì±…**:
- ì›ë³¸ ìŒì„±: MinIO S3 (`s3://audio-files/raw/`)
- ì „ì‚¬ í…ìŠ¤íŠ¸: PostgreSQL (ì•”í˜¸í™”)
- ìš”ì•½ë³¸: PostgreSQL + Redis ìºì‹œ (7ì¼)

**ë³´ì•ˆ ìš”êµ¬ì‚¬í•­**:
- âœ… ì „ì‚¬ í…ìŠ¤íŠ¸ ì•”í˜¸í™” ì €ì¥ (AES-256)
- âœ… ë¯¼ê° ì •ë³´ ë§ˆìŠ¤í‚¹ (ì£¼ë¯¼ë²ˆí˜¸, ì¹´ë“œë²ˆí˜¸ ìë™ ê°ì§€ ë° ****ì²˜ë¦¬)
- âœ… ì ‘ê·¼ ê¶Œí•œ ê´€ë¦¬ (ë¶€ì„œë³„ í•„í„°ë§)

---

### 2.3 ìš”ì•½ ë° íšŒì˜ë¡ ìƒì„± (Priority: P1)

#### 2.3.1 ìë™ ìš”ì•½ ìƒì„±
**ëª©í‘œ**: ì „ì‚¬ëœ í…ìŠ¤íŠ¸ë¥¼ LLMìœ¼ë¡œ ìš”ì•½í•˜ì—¬ í•µì‹¬ ë‚´ìš© ì¶”ì¶œ

**ê¸°ëŠ¥**:
- ì „ì‚¬ í…ìŠ¤íŠ¸ â†’ LLM ìš”ì•½ (GPT-4, Claude)
- ìš”ì•½ ë ˆë²¨ ì„ íƒ (ì§§ê²Œ/ë³´í†µ/ìƒì„¸)
- í•µì‹¬ í‚¤ì›Œë“œ ì¶”ì¶œ
- ì•¡ì…˜ ì•„ì´í…œ ìë™ ì¶”ì¶œ
- ë‹¤ìŒ íšŒì˜ ì•ˆê±´ ì¶”ì²œ

**í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿**:
```
ë‹¤ìŒì€ íšŒì˜ ì „ì‚¬ ë‚´ìš©ì…ë‹ˆë‹¤. ì£¼ìš” ë…¼ì˜ ì‚¬í•­, ê²°ì • ì‚¬í•­, ì•¡ì…˜ ì•„ì´í…œì„ ìš”ì•½í•´ì£¼ì„¸ìš”.

ì „ì‚¬ ë‚´ìš©:
{transcription_text}

ìš”ì•½ í˜•ì‹:
1. íšŒì˜ ê°œìš”
2. ì£¼ìš” ë…¼ì˜ ì‚¬í•­ (3-5ê°œ)
3. ê²°ì • ì‚¬í•­
4. ì•¡ì…˜ ì•„ì´í…œ (ë‹´ë‹¹ì, ê¸°í•œ)
5. ë‹¤ìŒ íšŒì˜ ì•ˆê±´
```

**ë°ì´í„° ëª¨ë¸**:
```python
class STTSummary(Base):
    __tablename__ = "stt_summaries"

    id = Column(Integer, primary_key=True)
    transcription_id = Column(Integer, ForeignKey("stt_transcriptions.id"))

    # ìš”ì•½ ë‚´ìš©
    summary_text = Column(Text, nullable=False)
    summary_level = Column(String(20))  # "brief", "normal", "detailed"
    keywords = Column(ARRAY(String))  # ["ì˜ˆì‚°", "ì¸ì‚¬", "í”„ë¡œì íŠ¸"]
    action_items = Column(JSONB)  # [{"task": "ë³´ê³ ì„œ ì œì¶œ", "assignee": "í™ê¸¸ë™", "due_date": "2025-11-01"}]

    # ìƒì„± ì •ë³´
    llm_model = Column(String(50))  # "gpt-4-turbo", "claude-3-opus"
    tokens_used = Column(Integer)
    generation_duration = Column(Float)  # seconds

    created_at = Column(DateTime, default=datetime.utcnow)
```

**ë³´ì•ˆ ìš”êµ¬ì‚¬í•­**:
- âœ… LLM ì…ë ¥ ê²€ì¦ (Prompt Injection ë°©ì§€)
- âœ… ë¯¼ê° ì •ë³´ ìë™ ì‚­ì œ í›„ ìš”ì•½
- âœ… ìš”ì•½ ê²°ê³¼ ê²€ì¦ (ìœ í•´ ì½˜í…ì¸  í•„í„°ë§)

---

#### 2.3.2 íšŒì˜ë¡ í¬ë§·íŒ…
**ëª©í‘œ**: ìš”ì•½ ë‚´ìš©ì„ í‘œì¤€í™”ëœ íšŒì˜ë¡ ì–‘ì‹ìœ¼ë¡œ ë³€í™˜

**ê¸°ëŠ¥**:
- íšŒì˜ë¡ í…œí”Œë¦¿ ì ìš© (HTML/PDF/Markdown)
- ì¡°ì§ CI ì ìš© (ë¡œê³ , ìƒ‰ìƒ, í°íŠ¸)
- ì°¸ì„ì ëª©ë¡ ìë™ ìƒì„± (í™”ì ë¶„ë¦¬ ê²°ê³¼ ê¸°ë°˜)
- ë‚ ì§œ/ì‹œê°„ ìë™ ì‚½ì…

**í…œí”Œë¦¿ ì˜ˆì‹œ**:
```html
<html>
<head>
    <title>íšŒì˜ë¡ - {meeting_title}</title>
    <style>/* ì¡°ì§ CI */</style>
</head>
<body>
    <h1>{meeting_title}</h1>
    <p>ì¼ì‹œ: {meeting_date}</p>
    <p>ì°¸ì„ì: {attendees}</p>

    <h2>1. íšŒì˜ ê°œìš”</h2>
    <p>{summary_overview}</p>

    <h2>2. ì£¼ìš” ë…¼ì˜ ì‚¬í•­</h2>
    <ul>{discussion_items}</ul>

    <h2>3. ê²°ì • ì‚¬í•­</h2>
    <ul>{decisions}</ul>

    <h2>4. ì•¡ì…˜ ì•„ì´í…œ</h2>
    <table>{action_items_table}</table>
</body>
</html>
```

---

### 2.4 ì´ë©”ì¼ ì†¡ì¶œ (Priority: P1)

#### 2.4.1 íšŒì˜ë¡ ì´ë©”ì¼ ë°œì†¡
**ëª©í‘œ**: ìƒì„±ëœ íšŒì˜ë¡ì„ ê´€ë ¨ìì—ê²Œ ìë™ ë°œì†¡

**ê¸°ëŠ¥**:
- ì´ë©”ì¼ ìˆ˜ì‹ ì ëª©ë¡ ê´€ë¦¬
- ì´ë©”ì¼ í…œí”Œë¦¿ ì ìš©
- ì²¨ë¶€íŒŒì¼ ì§€ì› (PDF, DOCX)
- ë°œì†¡ ì‹¤íŒ¨ ì‹œ ì¬ì‹œë„ (3íšŒ)
- ë°œì†¡ ì´ë ¥ ê¸°ë¡

**ì´ë©”ì¼ í…œí”Œë¦¿**:
```
ì œëª©: [íšŒì˜ë¡] {meeting_title} - {meeting_date}

{recipient_name}ë‹˜ ì•ˆë…•í•˜ì„¸ìš”,

{meeting_date}ì— ì§„í–‰ëœ "{meeting_title}" íšŒì˜ë¡ì„ ì „ë‹¬ë“œë¦½ë‹ˆë‹¤.

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“Œ íšŒì˜ ê°œìš”
{summary_overview}

ğŸ“‹ ì£¼ìš” ë…¼ì˜ ì‚¬í•­
{discussion_items}

âœ… ê²°ì • ì‚¬í•­
{decisions}

ğŸ“ ì•¡ì…˜ ì•„ì´í…œ
{action_items}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ìì„¸í•œ ë‚´ìš©ì€ ì²¨ë¶€ëœ íšŒì˜ë¡ íŒŒì¼ì„ í™•ì¸í•´ì£¼ì„¸ìš”.

ê°ì‚¬í•©ë‹ˆë‹¤.

--
AI Streams ê´€ë¦¬ì‹œìŠ¤í…œ
ìë™ ìƒì„± ë©”ì¼ì…ë‹ˆë‹¤.
```

**ë°ì´í„° ëª¨ë¸**:
```python
class STTEmailLog(Base):
    __tablename__ = "stt_email_logs"

    id = Column(Integer, primary_key=True)
    summary_id = Column(Integer, ForeignKey("stt_summaries.id"))

    # ì´ë©”ì¼ ì •ë³´
    recipient_email = Column(String(255), nullable=False)
    recipient_name = Column(String(100))
    cc_emails = Column(ARRAY(String))
    subject = Column(String(500))

    # ë°œì†¡ ìƒíƒœ
    status = Column(String(20))  # "pending", "sent", "failed", "bounced"
    sent_at = Column(DateTime)
    delivery_status = Column(String(50))  # "delivered", "opened", "clicked"
    error_message = Column(Text)
    retry_count = Column(Integer, default=0)

    # ì¶”ì 
    email_provider = Column(String(50))  # "smtp", "sendgrid", "aws-ses"
    message_id = Column(String(255))  # ì´ë©”ì¼ ì„œë¹„ìŠ¤ ì œê³µì ID

    created_at = Column(DateTime, default=datetime.utcnow)
```

**ë³´ì•ˆ ìš”êµ¬ì‚¬í•­**:
- âœ… ì´ë©”ì¼ ì£¼ì†Œ ê²€ì¦ (SMTP Injection ë°©ì§€)
- âœ… ì²¨ë¶€íŒŒì¼ ë°”ì´ëŸ¬ìŠ¤ ìŠ¤ìº”
- âœ… SPF/DKIM/DMARC ì„¤ì • (ìŠ¤íŒ¸ ë°©ì§€)
- âœ… ìˆ˜ì‹ ì ê°œì¸ì •ë³´ ì•”í˜¸í™”

---

## 3. ë¹„ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­

### 3.1 ì„±ëŠ¥
- **ì²˜ë¦¬ ì†ë„**: 1ë¶„ë‹¹ 1,200ê±´ ì´ìƒ ì „ì‚¬
- **ë™ì‹œ ì²˜ë¦¬**: ìµœëŒ€ 100ê°œ ë°°ì¹˜ ì‘ì—… ë™ì‹œ ì‹¤í–‰
- **ì‘ë‹µ ì‹œê°„**: API ì‘ë‹µ < 200ms (ëª¨ë‹ˆí„°ë§)
- **í™•ì¥ì„±**: ìˆ˜í‰ í™•ì¥ ê°€ëŠ¥ (Celery Worker ì¶”ê°€)

### 3.2 ë³´ì•ˆ
- **ì¸ì¦**: JWT í† í° ê¸°ë°˜ ì¸ì¦ (í•„ìˆ˜ êµ¬í˜„)
- **ê¶Œí•œ**: Cerbos RBAC (stt_batch:create, stt_batch:read, stt_batch:delete)
- **ì•”í˜¸í™”**:
  - ì „ì†¡ ì¤‘: HTTPS/TLS 1.3
  - ì €ì¥ ì¤‘: AES-256-GCM (ì „ì‚¬ í…ìŠ¤íŠ¸, ì´ë©”ì¼)
- **ê°ì‚¬**: ëª¨ë“  ì‘ì—… ë¡œê·¸ ê¸°ë¡ (ëˆ„ê°€, ì–¸ì œ, ë¬´ì—‡ì„)
- **ì·¨ì•½ì  ëŒ€ì‘**:
  - SQL Injection ë°©ì§€ (SQLAlchemy Parameterized Query)
  - XSS ë°©ì§€ (React Sanitization)
  - CSRF ë°©ì§€ (Token ê²€ì¦)
  - Path Traversal ë°©ì§€ (íŒŒì¼ ê²½ë¡œ ê²€ì¦)
  - Email Injection ë°©ì§€ (ì •ê·œì‹ ê²€ì¦)

### 3.3 ì•ˆì •ì„±
- **ê°€ìš©ì„±**: 99.9% (ì›” 43ë¶„ ë‹¤ìš´íƒ€ì„ í—ˆìš©)
- **ì—ëŸ¬ ì²˜ë¦¬**: ì‹¤íŒ¨ ì‹œ ìë™ ì¬ì‹œë„ (Exponential Backoff)
- **ëª¨ë‹ˆí„°ë§**: Prometheus + Grafana
- **ì•Œë¦¼**: ì‹¤íŒ¨ìœ¨ 1% ì´ˆê³¼ ì‹œ ê´€ë¦¬ì ì•Œë¦¼

### 3.4 ìœ ì§€ë³´ìˆ˜ì„±
- **ë¡œê¹…**: êµ¬ì¡°í™”ëœ JSON ë¡œê·¸ (ELK Stack)
- **ë¬¸ì„œí™”**: API ë¬¸ì„œ ìë™ ìƒì„± (OpenAPI/Swagger)
- **í…ŒìŠ¤íŠ¸**: ì»¤ë²„ë¦¬ì§€ 80% ì´ìƒ (pytest)

---

## 4. ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

### 4.1 ERD
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  stt_batches    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)         â”‚
â”‚ name            â”‚
â”‚ description     â”‚
â”‚ source_path     â”‚
â”‚ total_files     â”‚
â”‚ status          â”‚
â”‚ priority        â”‚
â”‚ created_by      â”‚
â”‚ created_at      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”‚ 1:N
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ stt_transcriptions  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)             â”‚
â”‚ batch_id (FK)       â”‚
â”‚ audio_file_path     â”‚
â”‚ transcription_text  â”‚
â”‚ speaker_labels      â”‚
â”‚ segments            â”‚
â”‚ status              â”‚
â”‚ created_at          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”‚ 1:1
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  stt_summaries  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)         â”‚
â”‚ transcription_idâ”‚
â”‚ summary_text    â”‚
â”‚ keywords        â”‚
â”‚ action_items    â”‚
â”‚ llm_model       â”‚
â”‚ created_at      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”‚ 1:N
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ stt_email_logs   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)          â”‚
â”‚ summary_id (FK)  â”‚
â”‚ recipient_email  â”‚
â”‚ status           â”‚
â”‚ sent_at          â”‚
â”‚ created_at       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. API ì—”ë“œí¬ì¸íŠ¸ ëª…ì„¸

### 5.1 STT ë°°ì¹˜ ê´€ë¦¬

| Method | Endpoint | Description | Auth |
|--------|----------|-------------|------|
| POST | `/api/v1/admin/stt-batches` | ë°°ì¹˜ ì‘ì—… ìƒì„± | admin, manager |
| GET | `/api/v1/admin/stt-batches` | ë°°ì¹˜ ëª©ë¡ ì¡°íšŒ | admin, manager, viewer |
| GET | `/api/v1/admin/stt-batches/{id}` | ë°°ì¹˜ ìƒì„¸ ì¡°íšŒ | admin, manager, viewer |
| GET | `/api/v1/admin/stt-batches/{id}/progress` | ì§„í–‰ ìƒí™© ì¡°íšŒ | admin, manager, viewer |
| PUT | `/api/v1/admin/stt-batches/{id}/pause` | ë°°ì¹˜ ì¼ì‹œì •ì§€ | admin, manager |
| PUT | `/api/v1/admin/stt-batches/{id}/resume` | ë°°ì¹˜ ì¬ê°œ | admin, manager |
| DELETE | `/api/v1/admin/stt-batches/{id}` | ë°°ì¹˜ ì‚­ì œ | admin |

### 5.2 ì „ì‚¬ ê²°ê³¼ ì¡°íšŒ

| Method | Endpoint | Description | Auth |
|--------|----------|-------------|------|
| GET | `/api/v1/admin/stt-transcriptions` | ì „ì‚¬ ëª©ë¡ ì¡°íšŒ | admin, manager, viewer |
| GET | `/api/v1/admin/stt-transcriptions/{id}` | ì „ì‚¬ ìƒì„¸ ì¡°íšŒ | admin, manager, viewer |
| GET | `/api/v1/admin/stt-transcriptions/{id}/download` | ì „ì‚¬ í…ìŠ¤íŠ¸ ë‹¤ìš´ë¡œë“œ | admin, manager |

### 5.3 ìš”ì•½ ë° ì´ë©”ì¼

| Method | Endpoint | Description | Auth |
|--------|----------|-------------|------|
| GET | `/api/v1/admin/stt-summaries/{id}` | ìš”ì•½ ì¡°íšŒ | admin, manager, viewer |
| POST | `/api/v1/admin/stt-summaries/{id}/send-email` | ì´ë©”ì¼ ë°œì†¡ | admin, manager |
| GET | `/api/v1/admin/stt-email-logs` | ì´ë©”ì¼ ì†¡ì¶œ ë‚´ì—­ ì¡°íšŒ | admin, manager |

---

## 6. í™”ë©´ ì„¤ê³„

### 6.1 STT ëŒ€ì‹œë³´ë“œ (ë§Œì¡±ë„ ì¡°ì‚¬ í•˜ë‹¨)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š ë§Œì¡±ë„ ì¡°ì‚¬ ê²°ê³¼                                           â”‚
â”‚  [ê¸°ì¡´ ë§Œì¡±ë„ ì¡°ì‚¬ ì°¨íŠ¸...]                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ™ï¸ STT ìŒì„± ì „ì‚¬ ì²˜ë¦¬ í˜„í™©                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ì „ì²´ ì§„í–‰ë¥ : â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘ 65%                     â”‚   â”‚
â”‚  â”‚ ì²˜ë¦¬ ì™„ë£Œ: 3,250,000 / 5,000,000ê±´                   â”‚   â”‚
â”‚  â”‚ í‰ê·  ì†ë„: 1,200ê±´/ë¶„                                  â”‚   â”‚
â”‚  â”‚ ì˜ˆìƒ ì™„ë£Œ: 2025-10-23 18:30                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â”‚  í™œì„± ë°°ì¹˜ ì‘ì—…                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ ID   â”‚ ë°°ì¹˜ëª…       â”‚ ìƒíƒœ      â”‚ ì§„í–‰ë¥    â”‚ ì‘ì—…    â”‚      â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚
â”‚  â”‚ 101  â”‚ 12ì›” ì´ë¬´íšŒì˜â”‚ ì²˜ë¦¬ì¤‘    â”‚ 65%     â”‚ [ìƒì„¸]  â”‚      â”‚
â”‚  â”‚ 100  â”‚ 11ì›” ê²½ì˜íšŒì˜â”‚ ì™„ë£Œ      â”‚ 100%    â”‚ [ë³´ê¸°]  â”‚      â”‚
â”‚  â”‚ 99   â”‚ 10ì›” ê¸°ìˆ íšŒì˜â”‚ ì‹¤íŒ¨      â”‚ 23%     â”‚ [ì¬ì‹œì‘]â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                              â”‚
â”‚  [+ ìƒˆ ë°°ì¹˜ ì‘ì—… ìƒì„±]                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“§ ìµœê·¼ ë°œì†¡ ë‚´ì—­                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ë²ˆí˜¸  â”‚ ìˆ˜ì‹ ì       â”‚ ì œëª©        â”‚ ë°œì†¡ì¼ì‹œ  â”‚ ìƒíƒœ    â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ 501  â”‚ hong@ex.kr  â”‚ 12ì›” íšŒì˜ë¡ â”‚ 10-21 09:30â”‚ ì „ì†¡ì™„ë£Œâ”‚   â”‚
â”‚  â”‚ 502  â”‚ kim@ex.kr   â”‚ 12ì›” íšŒì˜ë¡ â”‚ 10-21 09:30â”‚ ì „ì†¡ì™„ë£Œâ”‚   â”‚
â”‚  â”‚ 503  â”‚ park@ex.kr  â”‚ 12ì›” íšŒì˜ë¡ â”‚ 10-21 09:31â”‚ ì „ì†¡ì‹¤íŒ¨â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. ì‹œíì–´ ì½”ë”© ì²´í¬ë¦¬ìŠ¤íŠ¸

### 7.1 ì…ë ¥ ê²€ì¦
- [ ] íŒŒì¼ ê²½ë¡œ ê²€ì¦ (Path Traversal ë°©ì§€)
- [ ] íŒŒì¼ í¬ê¸° ì œí•œ (DoS ë°©ì§€)
- [ ] íŒŒì¼ í˜•ì‹ ê²€ì¦ (í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸)
- [ ] ì´ë©”ì¼ ì£¼ì†Œ ê²€ì¦ (Regex + DNS í™•ì¸)
- [ ] SQL Injection ë°©ì§€ (Parameterized Query)

### 7.2 ì¸ì¦/ì¸ê°€
- [ ] JWT í† í° ê²€ì¦
- [ ] Cerbos ê¶Œí•œ ì²´í¬
- [ ] API Rate Limiting

### 7.3 ë°ì´í„° ë³´í˜¸
- [ ] ì „ì‚¬ í…ìŠ¤íŠ¸ ì•”í˜¸í™” (AES-256)
- [ ] ë¯¼ê°ì •ë³´ ë§ˆìŠ¤í‚¹ (ì •ê·œì‹ ê¸°ë°˜)
- [ ] HTTPS ê°•ì œ ì ìš©

### 7.4 ë¡œê¹…/ê°ì‚¬
- [ ] ëª¨ë“  ì‘ì—… ê°ì‚¬ ë¡œê·¸ ê¸°ë¡
- [ ] ì‹¤íŒ¨ ì´ë²¤íŠ¸ ì•Œë¦¼
- [ ] ë³´ì•ˆ ì´ë²¤íŠ¸ ì¶”ì 

---

## 8. í…ŒìŠ¤íŠ¸ ê³„íš (TDD)

### 8.1 Unit Tests
```python
# tests/test_stt_batches.py
def test_create_batch_with_valid_data():
    """ì •ìƒ ë°ì´í„°ë¡œ ë°°ì¹˜ ìƒì„± í…ŒìŠ¤íŠ¸"""

def test_create_batch_with_invalid_path():
    """ì˜ëª»ëœ íŒŒì¼ ê²½ë¡œë¡œ ë°°ì¹˜ ìƒì„± ì‹œ ì‹¤íŒ¨"""

def test_batch_progress_calculation():
    """ì§„í–‰ë¥  ê³„ì‚° ì •í™•ë„ í…ŒìŠ¤íŠ¸"""

def test_email_validation():
    """ì´ë©”ì¼ ì£¼ì†Œ ê²€ì¦ í…ŒìŠ¤íŠ¸"""
```

### 8.2 Integration Tests
```python
def test_full_stt_workflow():
    """ë°°ì¹˜ ìƒì„± â†’ ì „ì‚¬ â†’ ìš”ì•½ â†’ ì´ë©”ì¼ ì „ì²´ í”Œë¡œìš°"""

def test_batch_pause_resume():
    """ë°°ì¹˜ ì¼ì‹œì •ì§€ ë° ì¬ê°œ í…ŒìŠ¤íŠ¸"""
```

### 8.3 Security Tests
```python
def test_sql_injection_prevention():
    """SQL Injection ë°©ì–´ í…ŒìŠ¤íŠ¸"""

def test_path_traversal_prevention():
    """Path Traversal ë°©ì–´ í…ŒìŠ¤íŠ¸"""

def test_unauthorized_access():
    """ê¶Œí•œ ì—†ëŠ” ì ‘ê·¼ ì°¨ë‹¨ í…ŒìŠ¤íŠ¸"""
```

---

## 9. ë°°í¬ ê³„íš

### 9.1 Phase 1: MVP (2ì£¼)
- âœ… ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ìƒì„±
- âœ… ë°°ì¹˜ CRUD API
- âœ… ì§„í–‰ ìƒí™© ëª¨ë‹ˆí„°ë§ API
- âœ… ê¸°ë³¸ UI (ë§Œì¡±ë„ ì¡°ì‚¬ í˜ì´ì§€ í•˜ë‹¨)

### 9.2 Phase 2: ì „ì‚¬ ì²˜ë¦¬ (3ì£¼)
- âœ… STT ì—”ì§„ ì—°ë™ (Whisper/Google STT)
- âœ… ë°°ì¹˜ ì›Œì»¤ êµ¬í˜„ (Celery)
- âœ… ì „ì‚¬ ê²°ê³¼ ì €ì¥
- âœ… ì—ëŸ¬ ì²˜ë¦¬ ë° ì¬ì‹œë„

### 9.3 Phase 3: ìš”ì•½ ë° ì´ë©”ì¼ (2ì£¼)
- âœ… LLM ìš”ì•½ ìƒì„±
- âœ… íšŒì˜ë¡ í¬ë§·íŒ…
- âœ… ì´ë©”ì¼ ì†¡ì¶œ
- âœ… ì†¡ì¶œ ë‚´ì—­ ì¶”ì 

---

## 10. ìœ„í—˜ ê´€ë¦¬

| ìœ„í—˜ | ì˜í–¥ | í™•ë¥  | ì™„í™” ì „ëµ |
|------|------|------|-----------|
| STT ì²˜ë¦¬ ì†ë„ ë¶€ì¡± | ë†’ìŒ | ì¤‘ê°„ | Worker ìˆ˜í‰ í™•ì¥, GPU ì‚¬ìš© |
| ì´ë©”ì¼ ìŠ¤íŒ¸ ì°¨ë‹¨ | ì¤‘ê°„ | ë†’ìŒ | SPF/DKIM ì„¤ì •, ì ì§„ì  ë°œì†¡ |
| 500ë§Œê±´ ìŠ¤í† ë¦¬ì§€ ë¶€ì¡± | ë†’ìŒ | ë‚®ìŒ | S3 í™•ì¥, ì „ì‚¬ í…ìŠ¤íŠ¸ ì••ì¶• |
| ë¯¼ê°ì •ë³´ ìœ ì¶œ | ë§¤ìš°ë†’ìŒ | ë‚®ìŒ | ì•”í˜¸í™”, ì ‘ê·¼ ê¶Œí•œ ì² ì € ê´€ë¦¬ |

---

**ìŠ¹ì¸**: _________________________
**ë‚ ì§œ**: _________________________
